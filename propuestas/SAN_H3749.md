# #SAN #H3749 Seguimiento de contactos desde eventos

Los objetivos de este proyecto son:
* Asociar contactos a agentes comerciales
* Conocer qué contactos han participado en los últimos eventos, y los que se han creado a través de ellos.
* Conocer qué pedidos han sido creado fruto de eventos celebrados.

## Agentes / Códigos postales
Añadiremos a la pantalla de agentes un listado de códigos postales asociados.

Por ahora la lógica de asociación agente - códigos será manual.

## Agentes / Timeline de acciones
El timeline de un contacto registará las interacciones de un contacto con Sanhigia. Por ahora las interacciones a registrar son:
* Creación por evento
* Participación en evento

En la ficha del contacto se incluirá un nuevo campo, que se calculará automáticamente cada vez que añadamos una nueva interacción.
* Fecha última interacción

## Eventos / Contactos relacionados
Incluiremos una nueva opción en _Eventos_ para asociar a un evento una lista de contactos asociados.

``` js
// Definir el formato de la lista. Si se va a crear contactos desde aquí necesitarmos no solo el email, sino el nombre, teléfono, etc.
```
Cuando se asocie un contacto al evento:
* Si el contacto ya existe, se asociará una nueva interacción de tipo _Participación en evento_, indicando el evento y la fecha.
* Si el contacto no existe, se creará y se asociará una nueva interacción de tipo _Creación por evento_, indicando el evento y la fecha.

## Webapp comerciales / Nuevo pedido
Incluiremos un nuevo campo _Evento_ en pedidos de cliente.

Cuando un agente cree un nuevo pedido podrá seleccionar opcionalmente el evento que lo ha ocasionado.

La lista de eventos que podrá seleccionar estará filtrada por aquellos eventos que **no** estén en estado Cerrado.

## Smart Sales / Últimos contactos
Incluiremos una nueva opción en el Home de _Smart Sales_ que permitirá a un usuario listar los contactos que están asociados a él por código postal y que han tenido una interacción en los últimos _N_ días, siendo _N_ un valor parametrizable en el ERP.

``` js
// Hay que ver si mantenemos la actual asociación de agentes - contactos (tabla MM agentescontactos), si usamos la nueva tabla agentes - códigos postales o si usamos ambas, cada una para una cosa.

// Hay 26363 de 35247 contactos con el código postal vacío o nulo.
```
El listado tendrá el formato y funcionalidad del actual listado de contactos de _Smart Sales_.

## Notas de desarrollo
No hay notas de desarrollo
