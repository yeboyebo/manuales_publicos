# #SAN #H4530 Ampliación de datos de eventos (módulos) y asociación con campañas de marketing

Los objetivos de este proyecto son:
+ Poder desglosar un evento de tipo curso en módulos y controlarlos por separado
+ Conocer los ingresos y gastos asociados a cada módulo
+ Poder ligar campañas a eventos de tipo curso

## Propuesta realizada a petición de:
Jesús y Paloma

## Estructura

### ERP / Módulos de curso
Crearemos una nueva entidad Módulo de curso, que contendrá los siguientes campos:

+ Código
+ Evento padre
+ Fecha y hora de inicio
+ Fecha y hora de fin
+ Estado

### ERP / Materiales para cursos
Modificaremos la asociación de líneas de material al curso, que pasarán a estar asociadas a cada módulo (no al curso global) y gestionadas desde ahí.

Modificaremos las acciones de:
    + Preparar curso
    + Finalizar curso

Para que funcionen asociadas a módulos y no a cursos.


### ERP / Cursos. Cálculo del estado
Dado que ahora cada módulo tiene su estado individual, el estado general del curso será:
+ Planificado si alguno de sus módulos está en estado Planificado
+ En preparación si no hay módulos en estado Planificado y sí hay módulos en estado En preparación.
+ En curso si no hay módulos en estado Planificado o En preparación y sí hay módulos en estado En curso
+ Cerrado si todos los módulos están en estado Cerrado

### ERP / Módulos de Cursos. Migración inicial
Crearemos un proceso que realizará las siguientes acciones al instalar la nueva funcionalidad:

+ Creará un módulo para cada evento actual, copiando sus datos del evento.

### ERP / Cursos. Nuevos campos
Crearemos nuevos campos en Cursos:

+ ~~Ingresos. Será el total del valor de los tratos ganados asociados a la campaña asociada al curso.~~
+ Gastos. Será un campo manual, modificable por el grupo Marketing.

### Webapp / Cursos
Podremos crear y editar cursos desde la webapp, indicando:
    + Nombre del curso
    + Cliente y dirección
    + Fecha y hora de inicio
    + Fecha y hora de fin
    + Responsables (agentes) asociados
    + Gastos

Podremos visualizar también los contactos asociados

El código del curso y el almacén se calcularán de forma automática.

El tipo de eventos de los cursos creados desde la web será siempre _Curso_.

### Webapp / Cursos. Configuración de permisos
+ El grupo Marketing será el único que podrá modificar los gastos del curso

### Webapp / Asociación de contacto a curso de campaña
Conectaremos el evento de _Trato Ganado_ a un consumidor que realizará las siguientes acciones:

+ Si el trato tiene un contacto asociado, pertenece a una campaña y dicha campaña pertenece a un curso:
    + Incluiremos el contacto del trato como contacto del curso


## Notas de desarrollo
Usar servidor Olula para evento de trato ganado. Restringir servidor Pineboo a eventos que ahora maneja y quitarlos de los que maneje el servidor Olula.

## Tareas
* #SAN #H4530. ERP / Módulos de curso
* #SAN #H4530. ERP / Materiales para cursos
* #SAN #H4530. ERP / Cursos. Cálculo del estado
* #SAN #H4530. ERP / Módulos de Cursos. Migración inicial
* #SAN #H4530. ERP / Cursos. Nuevos campos
* #SAN #H4530. Webapp / Cursos
* #SAN #H4530. Webapp / Configuración de permisos
* #SAN #H4530. Webapp / Asociación de contacto a curso de campaña

## Tests
+ Migración de cursos
+ Ciclo de vida de materiales en módulo de curso
+ Creación de curso desde appweb
+ Contacto asociado cuando se gana el trato

## Manual
Actualizaremos el manual en cuanto a:

+ Cursos / módulos
+ Asociación de contactos a cursos cuando se gana el trato

## Asistencia a puesta en marcha
Realizaremos los trabajos de migración tras la instalación y hablaremos con Paloma para indicarle el lugar donde crear cursos.

## Presupuesto
* #SAN #H4530. Ampliación de datos de eventos. Análisis 94,83€
* #SAN #H4530. Ampliación de datos de eventos. ERP / Módulos de curso 126,44€
* #SAN #H4530. Ampliación de datos de eventos. ERP / Materiales para cursos 94,83€
* #SAN #H4530. Ampliación de datos de eventos. ERP / Cursos. Cálculo del estado 63,22€
* #SAN #H4530. Ampliación de datos de eventos. ERP / Módulos de Cursos. Migración inicial 126,44€
* #SAN #H4530. Ampliación de datos de eventos. Webapp / Cursos 252,88€
* #SAN #H4530. Ampliación de datos de eventos. Webapp / Cursos. Nuevos campos 31,61€
* #SAN #H4530. Ampliación de datos de eventos. Webapp / Configuración de permisos 31,61€
* #SAN #H4530. Ampliación de datos de eventos. Webapp / Asociación de contacto a curso de campaña 126,44€
* #SAN #H4530. Ampliación de datos de eventos. Documentación 31,61€
* #SAN #H4530. Ampliación de datos de eventos. Asistencia a puesta en marcha 31,61€
