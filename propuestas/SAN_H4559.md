# #SAN #H4559 Acceso a datos de recepción de productos para comerciales desde App

Los objetivos de este proyecto son:
+ Que los comerciales puedan conocer si un artículo va a ser recibido y cuándo en el caso de que no haya stock disponible para realizar un pedido o presupuesto

## Propuesta realizada a petición de:
Jesús

## Estructura

### App / Pedidos de cliente / Crear línea
Cuando se crea una línea, si dicha línea no tiene stock suficiente, cambiaremos el label de aviso de que no hay stock por un texto con el siguiente formato:

```
Recepciones pendientes:
X el d1/m1/aaa1
Y el d2/m2/aaa2
...etc
```

donde X e Y son las cantidades pendientes de recibir y d1/m1/aaa1, d2/m2/aaa2 son las fechas estimadas de recepción.

Si no hay recepciones pendientes aparecerá un mensaje:

```
No hay recepciones pendientes de este producto
```

### App / Presupuestos de cliente / Crear línea
Mismo comportamiento que en pedidos

### App / Pedidos de cliente / Histórico
Incluiremos en las líneas de histórico un botón para consultar sus próximas recepciones que mostrará un texto similar al indicado para la creación de líneas.

### App / Presupuestos de cliente / Histórico
Mismo comportamiento que en pedidos


## Notas de desarrollo
```sql
SELECT lp.referencia. lp.cantidad, p.fecha + COALESCE(ap.diasentrega, 0) from pedidoscli p INNER JOIN lineaspedidoscli lp ON p.idpedido = lp.idpedido LEFT OUTER JOIN articulosprov ap ON ap.codproveedor = p.codproveedor AND ap.referencia = lp.referencia
```
Histórico: Ver posibilidad de que las recepciones pendientes se busquen al visualizar el detalle de la línea de presupuesto.

## Tareas
* #SAN #H4559. Mostrar recepciones pendientes. App / Pedidos de cliente / Crear línea
* #SAN #H4559. Mostrar recepciones pendientes. App / Presupuestos de cliente / Crear línea
* #SAN #H4559. Mostrar recepciones pendientes. App / Pedidos de cliente / Histórico
* #SAN #H4559. Mostrar recepciones pendientes. App / Presupuestos de cliente / Histórico

## Tests
+ Crear línea de pedido. Stock no disponible con y sin recepciones pendientes
+ Crear línea de presupuesto. Stock no disponible con y sin recepciones pendientes
+ Histórico de pedido. Acceso a recepciones con y sin recepciones pendientes
+ Histórico de presupuesto. Acceso a recepciones con y sin recepciones pendientes

## Manual
No es necesario manual

## Asistencia a puesta en marcha
No es necesaria.

## Puntos destacados 
Incluimos puntos para consultar las recepciones pendientes de los artículos que se incluyen en los pedidos y presupuestos desde el histórico, además de la consulta ya hablada al crear líneas de forma manual.