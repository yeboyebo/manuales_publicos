# #H3453 Contratos de intervención y colaboraciones por intervenciones

El objetivo de este proyecto es poder crear contratos de intervención a través de contratos marco y comprobar las colaboraciones a la hora de insertarlas si tienen un contrato de intervención vigente.

## Estructura

### Contratos
* Añadiremos al formulario maestro de contratos y al formulario de contratos de empleado un nuevo botón:
    * **Crear contrato intervención**
* Crearemos un nuevos campos:
    * **Tipo (Marco,Intervención,Otros)**
    * **Tipo (Vto. contrato)**
* Crearemos nuevos campos en la tabla aprovechando la pestaña Intervenciones / caches:
    * **Cache Plató**
    * **Cache Skype**
    * **Nº intervenciones Plató**
    * **Nº intervenciones Skype**
    * **Periodicidad Plató**
    * **Periodicidad Skype**

### Etiquetas
Crearemos dos nuevas etiquetas **CACHE_PLATO** y **CACHE_SKYPE** para la combinación con las plantillas.

## Dinámica
Cuando una productora necesite crear un contrato de intervención los pasos son:
* Existe un contrato marco.
    * Pulsamos el botón de **Crear contrato intervención**. Copiaremos los datos del contrato marco para nuestro nuevo contrato de intervención, indicando las fechas inicio y fin de este contrato. Se informará la plantilla por defecto, pero se podra elegir otra en su lugar.
* No existe contrato marco.
    * Crearemos un nuevo contrato indicando el tipo **Intervención** e informando manualmente todos los datos necesarios, incluidos **cachés, nº intervenciones, periodicidad, etc**.
Insertamos nuevas colaboraciones.
* Comprobaremos que existe un contrato de intervención para la fecha en la que estamos incluyendo una nueva colaboración, en caso de que no exista, se marca el registro en la tabla con una **P** de contrato de intervención pendiente de crear.


## Notas de desarrollo
* Al crear un nuevo contrato de intervención al informar fecha desde / hasta , si modificamos la fecha desde, fecha hasta será igual a fecha desde, y podemos modificar fecha hasta despues para que sea distinta.
* Al crear un contrato de intervención para la producción X debemos comprobar que no haya solapamiento de fechas con otro contrato de intervención de la misma producción X.


