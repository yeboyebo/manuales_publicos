# #YLD #H4471 Informe de tesorería

Los objetivos de este proyecto son:
+ Disponer de un informe de tesorería que agrupe entradas y salidas en cuentas de banco y caja en categorías agrupadas en ingresos, gastos y operaciones financieras.

## Propuesta realizada a petición de:
Natalia

## Tesorería

### Tesorería > Categorías de movimiento bancario
Crearemos una nueva tabla de categorías de movimiento bancario. Sus campos son

+ Id. Código de la categoría
+ Descripción.
+ Tipo. Posibles valores:
    + ingreso. Ingreso
    + gasto. Gasto
    + op_fin. Operación financiera

### Tesorería > Informe hoja de cálculo de movimientos bancarios 
Crearemos un nuevo informe con las siguientes características
+ Criterios de búsqueda:
    + Fechas desde - hasta
    + Cuenta bancaria (opcional)

+ Estructura
    + Cabecera con datos de la cuenta (opcional) y de las fechas consideradas
    + Nivel 1. Tipo de categoría de movimiento bancario
        + Tipo de ingreso
    + Nivel 2. Categoría de movimiento bancario
        + Código de categoría.
        + Importe total.
    + Pie de nivel 2. 
        + Importe total por Tipo de categoría
    + Pie de nivel 2.
        + Importe total del informe.

Definiremos el Importe total como la suma de debe - haber para las partidas contables que cumplan los criterios de subcuenta y fechas impuestos.


## Tesorería y contabilidad

### Contabilidad > Partidas de asiento
Crearemos un nuevo campo en partidas contables:
+ Código de categoría de movimiento bancario. Opcional. Relacionado con Categorías de movimiento bancario.

Forzaremos a que todas las partidas de operación bancaria (aquellas cuya subcuenta comienza por 57...) deban tener informado su código de categoría

### Asientos de cobro y pago de recibos
Incluiremos dos campos en el apartado de configuración del módulo de Tesorería:
+ Categoría de movimiento bancario para cobros de recibos de venta
+ Categoría de movimiento bancario para pagos de recibos de compra

Incluiremos un campo _Categoría movimiento bancario_ en recibos de cliente y proveedor. Este campo se informará automáticamente con los valores de la configuración y podrán ser modificados de forma manual para recibos en estado _Emitido_


### Asientos manuales
Crearemos un apartado en el formulario de partidas contables llamado _Movimiento bancario_ similar al apartado de IVA, que se activará solo cuando la subcuenta de la partida sea de movimiento bancario, para informar ahí el código de categoría de movimiento, y que no permitirá guardar la partida sin establecerlo.

## Notas de desarrollo
A nivel de beforeCommit también controlaremos que el código de categoría de movimiento bancario esté informado.



## Tareas
* #YLD #H4471. Tesorería > Categorías de movimiento bancario
* #YLD #H4471. Tesorería > Informe hoja de cálculo  de ingresos y gastos
* #YLD #H4471. Contabilidad > Partidas de asiento
* #YLD #H4471. Asientos de cobro y pago de recibos
* #YLD #H4471. Asientos manuales


## Tests
+ Recibo de compras
+ Recibo de ventas
+ Asientos manuales
+ Informe hoja de cálculo con distintos filtros

## Manual
El manual explicará:
+ Cómo crear y mantener categorías de movimiento bancario
+ Cómo configurar las categorías para recibos de compra y venta
+ Cómo usar el informe de movimientos bancarios de tesorería

## Asistencia a puesta en marcha
No es necesaria.

## Presupuesto
* #YLD #H4471. Análisis
* #YLD #H4471. Tesorería > Categorías de movimiento bancario
* #YLD #H4471. Tesorería > Informe hoja de cálculo  de ingresos y gastos
* #YLD #H4471. Contabilidad > Partidas de asiento
* #YLD #H4471. Asientos de cobro y pago de recibos
* #YLD #H4471. Asientos manuales
* #YLD #H4471. Documentación
